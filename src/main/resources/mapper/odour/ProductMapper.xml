<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bjfu.li.odour.mapper.ProductMapper">

    <resultMap id="ProductMap" type="com.bjfu.li.odour.po.Product">
        <id column="id" property="id"/>
        <result column="product_name" property="productName" />
        <result column="product_description" property="productDescription"/>
        <result column="product_picture" property="productPicture"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
    </resultMap>
    <select id="selectAll" resultMap="ProductMap">
        SELECT * FROM product
    </select>
    <select id="selectTop" resultMap="ProductMap">
        SELECT * FROM product ORDER BY update_time DESC LIMIT #{num}
    </select>
    <select id="dynamicSelect" resultType="com.bjfu.li.odour.po.Product">
        SELECT * FROM product
        <where>
            <foreach collection="list" index="index" item="searchVo" open=" " separator=" " close=" ">
                <if test="searchVo.searchRule == 'equal'">
                    AND ${searchVo.searchProperty} = #{searchVo.searchValue}
                </if>
                <if test="searchVo.searchRule == 'large'">
                    AND ${searchVo.searchProperty} &gt; #{searchVo.searchValue}
                </if>
                <if test="searchVo.searchRule == 'small'">
                    AND ${searchVo.searchProperty} &lt; #{searchVo.searchValue}
                </if>
                <if test="searchVo.searchRule == 'like'">
                    AND ${searchVo.searchProperty} like concat("%", #{searchVo.searchValue}, "%")
                </if>
            </foreach>
        </where>
    </select>
</mapper>
